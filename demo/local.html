<html>

<head> 
  <meta charset="utf-8">
  <title>Tambora Demo</title>
  <link href="https:////cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/icon.min.css"  type="text/css" rel="stylesheet" />
  <link href="https://viglino.github.io/ol-ext/dist/ol-ext.css"  type="text/css" rel="stylesheet" />
 
</head>

<body>


<div id="map"></div>

<style>
#map{ width: 100%; height: 600px; }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.6.5/ol.js" type="text/javascript"></script>
<script src="https://viglino.github.io/ol-ext/dist/ol-ext.js" type="text/javascript"></script>
 
 
<script src='../src/index.js'></script>
<script>
var baseMapLayer = new ol.layer.Tile({
  source: new ol.source.OSM()
});
var map = new ol.Map({
  target: 'map',
  layers: [ baseMapLayer],
  view: new ol.View({
          center: ol.proj.fromLonLat([8,48]), 
          zoom: 9 //Initial Zoom Level
        })
});

//https://stackoverflow.com/questions/45677820/openlayers-markers-with-popup
//view-source:https://viglino.github.io/ol-ext/examples/style/map.style.font.html
markerLayer = new ol.layer.Vector({ source: new ol.source.Vector({ features: [], projection: 'EPSG:3857' }) });


//https://openlayers.org/en/latest/examples/cluster.html
//https://harrywood.co.uk/maps/examples/openlayers/marker-popups.view.html


 // GeoJSON layer
  var vectorSource = new ol.source.Vector({
    //url: 'https://viglino.github.io/ol-ext/examples/data/fond_guerre.geojson',
	url: "https://www.tambora.org/index.php/grouping/event/geojson?limit=5000&t[yb]=1540&t[ye]=1540&g[nd]=90,590,591,87,819,571&g[va]=86,82,6,104,101,41,48,142,57,134,124,125,123",
    projection: 'EPSG:3857',
    format: new ol.format.GeoJSON(),
    attributions: [ "&copy; <a href='https://data.culture.gouv.fr/explore/dataset/fonds-de-la-guerre-14-18-extrait-de-la-base-memoire'>data.culture.gouv.fr</a>" ],
    logo:"https://www.data.gouv.fr/s/avatars/37/e56718abd4465985ddde68b33be1ef.jpg" 
  });

  var vector = new TamboraMarkerLayer({ // ol.layer.Vector({
    name: '1914-18',
    preview: "http://www.culture.gouv.fr/Wave/image/memoire/2445/sap40_z0004141_v.jpg",
    source: vectorSource,
    // y ordering
    renderOrder: ol.ordering.yOrdering(),
    style: getStyle
  })

  map.addLayer(vector);



</script>

</body>
</html>
